<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Seva Mela - VCD Department">
  <meta name="theme-color" content="#f97316">
  <title>Seva Mela - VCD Department</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding-bottom: 80px;
      background: #f8f9fa;
    }

    /* Splash Screen */
    .splash-screen {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: linear-gradient(135deg, #f97316 0%, #fb923c 50%, #1e3a8a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .splash-logo {
      width: 150px;
      height: 150px;
      margin-bottom: 2rem;
      border-radius: 50%;
      object-fit: contain;
      background: white;
      padding: 15px;
      animation: logoFloat 3s ease-in-out infinite;
      filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.4));
    }

    @keyframes logoFloat {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.05); }
    }

    .splash-content {
      text-align: center;
      position: relative;
      animation: fadeInUp 1s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .spiritual-path {
      position: relative;
      width: 400px;
      height: 200px;
      margin: 40px auto;
      max-width: 90vw;
    }

    .path-line {
      position: absolute;
      bottom: 60px;
      left: 0;
      right: 0;
      height: 4px;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 2px;
      overflow: hidden;
    }

    .path-line::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .monkey-walker {
      position: absolute;
      bottom: 45px;
      left: 0;
      font-size: 60px;
      animation: walkPath 4s ease-in-out infinite;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3));
    }

    @keyframes walkPath {
      0%, 100% { left: 0; transform: translateX(0) scaleX(1); }
      48% { transform: translateX(0) scaleX(1); }
      50% { transform: translateX(0) scaleX(-1); }
      98%, 100% { left: calc(100% - 60px); transform: translateX(0) scaleX(-1); }
    }

    .breathing-circle {
      position: absolute;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 30px;
      border: 3px solid rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      animation: breathe 4s ease-in-out infinite;
    }

    @keyframes breathe {
      0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.4; }
      50% { transform: translateX(-50%) scale(1.5); opacity: 0.8; }
    }

    .floating-elements {
      position: absolute;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
    }

    .floating-particle {
      position: absolute;
      font-size: 24px;
      opacity: 0;
      animation: float 6s ease-in-out infinite;
    }

    .floating-particle:nth-child(1) { left: 10%; animation-delay: 0s; }
    .floating-particle:nth-child(2) { left: 20%; animation-delay: 1s; }
    .floating-particle:nth-child(3) { left: 30%; animation-delay: 2s; }
    .floating-particle:nth-child(4) { left: 40%; animation-delay: 0.5s; }
    .floating-particle:nth-child(5) { left: 50%; animation-delay: 1.5s; }
    .floating-particle:nth-child(6) { left: 60%; animation-delay: 2.5s; }
    .floating-particle:nth-child(7) { left: 70%; animation-delay: 1s; }
    .floating-particle:nth-child(8) { left: 80%; animation-delay: 2s; }
    .floating-particle:nth-child(9) { left: 90%; animation-delay: 0.8s; }

    @keyframes float {
      0% { bottom: -50px; opacity: 0; transform: translateX(0) rotate(0deg); }
      10% { opacity: 0.7; }
      90% { opacity: 0.7; }
      100% { bottom: 100%; opacity: 0; transform: translateX(50px) rotate(360deg); }
    }

    .splash-title {
      color: white;
      font-size: 3rem;
      font-weight: 900;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      margin-bottom: 1rem;
      animation: textGlow 2s ease-in-out infinite;
    }

    @keyframes textGlow {
      0%, 100% { text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); }
      50% { text-shadow: 0 4px 40px rgba(255, 255, 255, 0.6); }
    }

    .splash-tagline {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.25rem;
      margin-top: 1rem;
      font-style: italic;
    }

    .loading-dots {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 2rem;
    }

    .loading-dots span {
      width: 12px;
      height: 12px;
      background: white;
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
    }

    .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
    .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }

    .splash-hidden {
      animation: fadeOutDown 0.8s ease-in-out forwards;
    }

    @keyframes fadeOutDown {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(30px); }
    }

    /* Progress bar with candy stripes */
    .progress-bar-container {
      position: relative;
      height: 8px;
      background: #e5e7eb;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(
        45deg,
        #fbbf24 25%,
        #fcd34d 25%,
        #fcd34d 50%,
        #fbbf24 50%,
        #fbbf24 75%,
        #fcd34d 75%,
        #fcd34d
      );
      background-size: 40px 40px;
      animation: progressStripes 1s linear infinite;
      transition: width 0.5s ease-in-out;
      border-radius: 10px;
    }

    @keyframes progressStripes {
      from { background-position: 0 0; }
      to { background-position: 40px 0; }
    }

    /* Success Modal */
    .success-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10000;
      background: white;
      border-radius: 24px;
      padding: 2rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: modalSlideIn 0.5s ease-out;
      max-width: 90vw;
      width: 400px;
    }

    @keyframes modalSlideIn {
      from { opacity: 0; transform: translate(-50%, -60%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }

    .success-checkmark {
      width: 80px;
      height: 80px;
      margin: 0 auto 1rem;
      border-radius: 50%;
      background: #10b981;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: successBounce 0.6s ease-out;
    }

    @keyframes successBounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    /* Bottom Navigation - Game style */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #e5e7eb;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
      z-index: 1000;
      padding: 0.5rem 0;
    }

    .nav-button {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      padding: 0.5rem;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #6b7280;
    }

    .nav-button.active {
      color: #f97316;
    }

    .nav-button:hover {
      color: #f97316;
      background: rgba(249, 115, 22, 0.05);
    }

    .nav-label {
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Modal backdrop */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9998;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Leaderboard slide-in */
    .leaderboard-slide {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      width: 90%;
      max-width: 500px;
      background: white;
      z-index: 9999;
      overflow-y: auto;
      animation: slideInLeft 0.3s ease-out;
      box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
    }

    @keyframes slideInLeft {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }

    #qr-reader {
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Game card styling */
    .game-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
    }

    .game-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
      transform: translateY(-2px);
    }

    .game-card-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    @media (max-width: 768px) {
      .game-card-image {
        height: 140px;
      }
    }

    /* Score table */
    .score-table-container {
      overflow-x: auto;
      max-width: 100%;
    }

    .score-table {
      width: 100%;
      min-width: 600px;
      border-collapse: collapse;
    }

    .score-table th,
    .score-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }

    .score-table th {
      background: #f9fafb;
      font-weight: 700;
      color: #374151;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .score-table tr:hover {
      background: #f9fafb;
    }

    /* Stats badge */
    .stat-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: #f3f4f6;
      border-radius: 12px;
      font-size: 0.875rem;
    }

    .stat-value {
      font-weight: 700;
      font-size: 1.125rem;
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash-screen" class="splash-screen">
    <div class="floating-elements">
      <div class="floating-particle">üå∏</div>
      <div class="floating-particle">‚ú®</div>
      <div class="floating-particle">ü™∑</div>
      <div class="floating-particle">üïâÔ∏è</div>
      <div class="floating-particle">üå∫</div>
      <div class="floating-particle">‚≠ê</div>
      <div class="floating-particle">üí´</div>
      <div class="floating-particle">‚ú®</div>
      <div class="floating-particle">üå∏</div>
    </div>

    <div class="splash-content">
      <img src="isha_symbol.jpg" alt="Isha Foundation" class="splash-logo" onerror="this.style.display='none'">
      
      <h1 class="splash-title">Seva Mela</h1>
      <p class="text-4xl text-white font-bold mb-4">VCD Department</p>
      
      <div class="spiritual-path">
        <div class="path-line"></div>
        <div class="monkey-walker">üêí</div>
        <div class="breathing-circle"></div>
        <div style="position: absolute; left: 10%; top: 20%; font-size: 40px; animation: float 3s ease-in-out infinite;">üêíüçå</div>
        <div style="position: absolute; right: 15%; top: 30%; font-size: 35px; animation: float 4s ease-in-out infinite; animation-delay: 1s;">üêµüçå</div>
        <div style="position: absolute; left: 20%; bottom: 20%; font-size: 45px; animation: float 3.5s ease-in-out infinite; animation-delay: 0.5s;">üêíüçå</div>
        <div style="position: absolute; right: 10%; bottom: 30%; font-size: 38px; animation: float 4.5s ease-in-out infinite; animation-delay: 1.5s;">üêµüçå</div>
      </div>

      <p class="splash-tagline">"Explore the journey from a Monkey to a Yogi"</p>
      
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <div id="root"></div>

  <script>
    const { useState, useEffect, useRef } = React;

    const GAMES = [
      { 
        id: 'game1', 
        name: 'Wheel of Fortune', 
        qrCode: 'GAME1_WHEEL_OF_FORTUNE',
        image: 'wheel_game.png',
        stageName: 'Seeker',
        stagePoints: 10,
        gamePoints: 20,
        maxCoins: 100
      },
      { 
        id: 'game2', 
        name: 'Memory Card Quiz', 
        qrCode: 'GAME2_MEMORY_CARD_QUIZ',
        image: 'memory_card.png',
        stageName: 'Explorer',
        stagePoints: 10,
        gamePoints: 20,
        maxCoins: 100
      },
      { 
        id: 'game3', 
        name: 'Paper Plane', 
        qrCode: 'GAME3_PAPER_PLANE',
        image: 'paper_plane.png',
        stageName: 'Wanderer',
        stagePoints: 10,
        gamePoints: 15,
        maxCoins: 100
      },
      { 
        id: 'game4', 
        name: 'Volunteer Tree Experience', 
        qrCode: 'GAME4_VOLUNTEER_TREE',
        image: 'volunteer_tree.png',
        stageName: 'Yogi',
        stagePoints: 15,
        gamePoints: 0,
        maxCoins: 0
      }
    ];

    const CATEGORIES = [
      'Long Term Volunteer (LTV)',
      'Short Term Volunteer (STV)',
      'Brahmachari',
      'Sanyasi',
      'Sadhanapada',
      'Ashram Resident',
      'Visitor Guest',
      'Sevadhar',
      'Staff',
      'Admin'
    ];

    const ADMIN_PIN = '1234';

    function Icon({ name, size = 24, className = "", strokeWidth = 2 }) {
      const iconRef = useRef(null);
      
      useEffect(() => {
        if (iconRef.current && window.lucide) {
          const IconComponent = window.lucide[name];
          if (IconComponent) {
            iconRef.current.innerHTML = '';
            const icon = IconComponent;
            window.lucide.createElement(icon);
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', size);
            svg.setAttribute('height', size);
            svg.setAttribute('viewBox', '0 0 24 24');
            svg.setAttribute('fill', 'none');
            svg.setAttribute('stroke', 'currentColor');
            svg.setAttribute('stroke-width', strokeWidth);
            svg.setAttribute('stroke-linecap', 'round');
            svg.setAttribute('stroke-linejoin', 'round');
            svg.setAttribute('class', className);
            iconRef.current.appendChild(svg);
            window.lucide.createIcons({ icons: { [name]: icon }, nameAttr: 'data-lucide' });
          }
        }
      }, [name, size, className, strokeWidth]);
      
      return React.createElement('span', { ref: iconRef, className: 'inline-flex', 'data-lucide': name });
    }

    function SevaMelaApp() {
      const [showSplash, setShowSplash] = useState(true);
      const [onboardingComplete, setOnboardingComplete] = useState(false);
      const [userName, setUserName] = useState('');
      const [userCategory, setUserCategory] = useState('');
      const [isAdmin, setIsAdmin] = useState(false);
      const [adminPinInput, setAdminPinInput] = useState('');
      const [participants, setParticipants] = useState([]);
      const [currentUser, setCurrentUser] = useState(null);
      const [showLeaderboard, setShowLeaderboard] = useState(false);
      const [showQRScanner, setShowQRScanner] = useState(false);
      const [selectedGame, setSelectedGame] = useState(null);
      const [successModalData, setSuccessModalData] = useState(null);
      const [activeView, setActiveView] = useState('home');
      const html5QrCodeRef = useRef(null);
      const isScanning = useRef(false);

      useEffect(() => {
        const savedParticipants = localStorage.getItem('sevaMelaParticipants');
        const savedUser = localStorage.getItem('sevaMelaCurrentUser');
        
        if (savedParticipants) {
          setParticipants(JSON.parse(savedParticipants));
        }
        
        if (savedUser) {
          const user = JSON.parse(savedUser);
          setCurrentUser(user);
          setUserName(user.name);
          setUserCategory(user.category);
          setIsAdmin(user.isAdmin);
          setOnboardingComplete(true);
        }
      }, []);

      useEffect(() => {
        if (participants.length > 0) {
          localStorage.setItem('sevaMelaParticipants', JSON.stringify(participants));
        }
      }, [participants]);

      useEffect(() => {
        if (currentUser) {
          localStorage.setItem('sevaMelaCurrentUser', JSON.stringify(currentUser));
        }
      }, [currentUser]);

      useEffect(() => {
        const confettiTimer = setTimeout(() => {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
        }, 500);
        
        const timer = setTimeout(() => {
          const splash = document.getElementById('splash-screen');
          if (splash) {
            splash.classList.add('splash-hidden');
            setTimeout(() => {
              splash.style.display = 'none';
              setShowSplash(false);
            }, 800);
          }
        }, 3000);
        
        return () => {
          clearTimeout(confettiTimer);
          clearTimeout(timer);
        };
      }, []);

      const handleOnboardingSubmit = () => {
        if (userCategory === 'Admin') {
          if (adminPinInput !== ADMIN_PIN) {
            alert('Incorrect admin PIN');
            return;
          }
          
          const adminUser = {
            name: 'Admin',
            category: 'Admin',
            isAdmin: true,
            games: GAMES.reduce((acc, game) => ({
              ...acc,
              [game.id]: {
                scanned: false,
                stagePercent: 0,
                coinsEarned: 0,
                gamePercent: 0
              }
            }), {})
          };
          
          setCurrentUser(adminUser);
          setUserName('Admin');
          setIsAdmin(true);
          setOnboardingComplete(true);
          return;
        }

        if (!userName.trim() || !userCategory) {
          alert('Please enter your name and select a category');
          return;
        }

        const trimmedName = userName.trim();
        const existingUser = participants.find(p => 
          p.name === trimmedName && p.category === userCategory
        );
        
        if (existingUser) {
          const result = confirm(
            `Welcome back, ${trimmedName}!\n\n` +
            `A user with name "${trimmedName}" and category "${userCategory}" already exists.\n\n` +
            `Click OK to continue with your existing account\n` +
            `Click Cancel to choose a different name`
          );
          
          if (result) {
            setCurrentUser(existingUser);
            setUserName(existingUser.name);
            setIsAdmin(existingUser.isAdmin);
            setOnboardingComplete(true);
          }
          return;
        }
        
        const nameExistsElsewhere = participants.find(p => 
          p.name.toLowerCase() === trimmedName.toLowerCase() && p.category !== userCategory
        );
        
        if (nameExistsElsewhere) {
          const result = confirm(
            `Note: "${trimmedName}" is already used by someone in ${nameExistsElsewhere.category} category.\n\n` +
            `You can still use "${trimmedName}" for ${userCategory} category.\n\n` +
            `Click OK to continue with "${trimmedName}"\n` +
            `Click Cancel to choose a different name`
          );
          
          if (result) {
            createNewUser(trimmedName);
          }
          return;
        }
        
        const similarNames = participants.filter(p => 
          p.category === userCategory && (
            p.name.toLowerCase() === trimmedName.toLowerCase() ||
            p.name.toLowerCase().startsWith(trimmedName.toLowerCase() + ' ')
          )
        );
        
        if (similarNames.length > 0) {
          let counter = 1;
          let suggestedName = `${trimmedName} ${counter}`;
          while (participants.find(p => p.name === suggestedName && p.category === userCategory)) {
            counter++;
            suggestedName = `${trimmedName} ${counter}`;
          }
          
          const result = confirm(
            `The name "${trimmedName}" or similar is already taken in ${userCategory} category.\n\n` +
            `Existing: ${similarNames.map(p => p.name).join(', ')}\n\n` +
            `Would you like to use "${suggestedName}" instead?\n\n` +
            `Click OK to use "${suggestedName}"\n` +
            `Click Cancel to choose a different name`
          );
          
          if (result) {
            createNewUser(suggestedName);
          }
          return;
        }
        
        createNewUser(trimmedName);
      };

      const createNewUser = (finalName) => {
        const newUser = {
          name: finalName,
          category: userCategory,
          isAdmin: false,
          games: GAMES.reduce((acc, game) => ({
            ...acc,
            [game.id]: {
              scanned: false,
              stagePercent: 0,
              coinsEarned: 0,
              gamePercent: 0
            }
          }), {})
        };

        const updatedParticipants = [...participants, newUser];
        setParticipants(updatedParticipants);
        setCurrentUser(newUser);
        setUserName(finalName);
        setIsAdmin(false);
        setOnboardingComplete(true);
      };

      const calculateProgress = () => {
        if (!currentUser || isAdmin) return 0;
        
        let totalPercent = 0;
        GAMES.forEach(game => {
          const gameData = currentUser.games[game.id];
          if (gameData) {
            totalPercent += (gameData.stagePercent || 0) + (gameData.gamePercent || 0);
          }
        });
        
        return Math.min(100, Math.round(totalPercent));
      };

      const handleQRScan = (decodedText) => {
        console.log('QR Scanned:', decodedText);
        
        if (isAdmin) {
          alert('Admin users cannot scan QR codes');
          return;
        }

        const matchedGame = GAMES.find(g => decodedText.includes(g.qrCode) || decodedText.includes(g.id));
        
        if (matchedGame) {
          if (html5QrCodeRef.current && isScanning.current) {
            html5QrCodeRef.current.stop().then(() => {
              isScanning.current = false;
              setShowQRScanner(false);
            }).catch(err => console.error(err));
          } else {
            setShowQRScanner(false);
          }

          const currentGameData = currentUser.games[matchedGame.id];
          if (currentGameData.scanned) {
            alert(`You've already scanned ${matchedGame.name}! Move on to the next game.`);
            return;
          }

          const updatedUser = {
            ...currentUser,
            games: {
              ...currentUser.games,
              [matchedGame.id]: {
                ...currentGameData,
                scanned: true,
                stagePercent: matchedGame.stagePoints
              }
            }
          };

          setCurrentUser(updatedUser);
          
          const updatedParticipants = participants.map(p => 
            p.name === currentUser.name && p.category === currentUser.category ? updatedUser : p
          );
          setParticipants(updatedParticipants);

          const scannedCount = Object.values(updatedUser.games).filter(g => g.scanned).length;
          let totalPercent = 0;
          GAMES.forEach(game => {
            const gData = updatedUser.games[game.id];
            totalPercent += (gData.stagePercent || 0) + (gData.gamePercent || 0);
          });

          setSuccessModalData({
            game: matchedGame,
            scannedCount,
            totalProgress: Math.min(100, Math.round(totalPercent))
          });

          confetti({
            particleCount: 200,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#f97316', '#fb923c', '#1e3a8a', '#3b82f6', '#fbbf24']
          });

          setTimeout(() => {
            setSuccessModalData(null);
          }, 2500);
        } else {
          alert('Invalid QR code. Please scan a valid game QR code.');
        }
      };

      const startQRScanner = () => {
        setShowQRScanner(true);
        
        setTimeout(() => {
          const qrReaderElement = document.getElementById('qr-reader');
          if (!qrReaderElement) {
            console.error('QR reader element not found');
            return;
          }

          if (!html5QrCodeRef.current) {
            html5QrCodeRef.current = new Html5Qrcode("qr-reader");
          }

          if (!isScanning.current) {
            html5QrCodeRef.current.start(
              { facingMode: "environment" },
              {
                fps: 10,
                qrbox: { width: 250, height: 250 }
              },
              handleQRScan,
              (errorMessage) => {}
            ).then(() => {
              isScanning.current = true;
            }).catch(err => {
              console.error('Camera start error:', err);
              alert('Camera permission denied or not available. Please check settings.');
            });
          }
        }, 100);
      };

      const stopQRScanner = () => {
        if (html5QrCodeRef.current && isScanning.current) {
          html5QrCodeRef.current.stop().then(() => {
            isScanning.current = false;
            setShowQRScanner(false);
          }).catch(err => console.error(err));
        } else {
          setShowQRScanner(false);
        }
      };

      const awardGamePoints = (participantName, participantCategory, gameId, coins) => {
        const game = GAMES.find(g => g.id === gameId);
        
        if (coins < 0 || coins > game.maxCoins) {
          alert(`Coins must be between 0 and ${game.maxCoins}`);
          return false;
        }

        const gamePercent = game.maxCoins > 0 ? Math.round((coins / game.maxCoins) * game.gamePoints) : 0;

        const updatedParticipants = participants.map(p => {
          if (p.name === participantName && p.category === participantCategory) {
            return {
              ...p,
              games: {
                ...p.games,
                [gameId]: {
                  ...p.games[gameId],
                  coinsEarned: coins,
                  gamePercent: gamePercent
                }
              }
            };
          }
          return p;
        });

        setParticipants(updatedParticipants);
        
        confetti({
          particleCount: 150,
          spread: 70,
          origin: { y: 0.6 },
          colors: ['#f97316', '#fb923c', '#1e3a8a', '#3b82f6', '#fbbf24']
        });

        if (currentUser && currentUser.name === participantName && currentUser.category === participantCategory) {
          const updatedUser = updatedParticipants.find(p => p.name === participantName && p.category === participantCategory);
          setCurrentUser(updatedUser);
        }

        return true;
      };

      const getLeaderboard = () => {
        const sorted = participants
          .filter(p => !p.isAdmin)
          .map(p => {
            let totalPercent = 0;
            GAMES.forEach(game => {
              const gameData = p.games[game.id];
              totalPercent += gameData.stagePercent + gameData.gamePercent;
            });
            
            return {
              name: p.name,
              category: p.category,
              totalPercentage: Math.min(100, Math.round(totalPercent))
            };
          })
          .sort((a, b) => b.totalPercentage - a.totalPercentage);
        
        let currentRank = 1;
        return sorted.map((player, index) => {
          if (index > 0 && sorted[index - 1].totalPercentage !== player.totalPercentage) {
            currentRank = index + 1;
          }
          return { ...player, rank: currentRank };
        });
      };

      const handleRefresh = () => {
        const savedParticipants = localStorage.getItem('sevaMelaParticipants');
        const savedUser = localStorage.getItem('sevaMelaCurrentUser');
        
        if (savedParticipants) {
          setParticipants(JSON.parse(savedParticipants));
        }
        
        if (savedUser) {
          setCurrentUser(JSON.parse(savedUser));
        }
        
        alert('Data refreshed!');
      };

      const deletePlayer = (playerName, playerCategory) => {
        if (!isAdmin) {
          alert('Only admins can delete players');
          return;
        }

        const result = confirm(`Delete ${playerName} (${playerCategory}) from the system?`);
        if (result) {
          const updatedParticipants = participants.filter(
            p => !(p.name === playerName && p.category === playerCategory)
          );
          setParticipants(updatedParticipants);
          alert('Player deleted successfully!');
        }
      };

      const getScoreTableData = () => {
        return participants
          .filter(p => !p.isAdmin)
          .map(p => {
            const gameScores = GAMES.map(game => ({
              gameId: game.id,
              gameName: game.name,
              gamePercent: p.games[game.id]?.gamePercent || 0,
              stagePercent: p.games[game.id]?.stagePercent || 0,
              scanned: p.games[game.id]?.scanned || false
            }));
            
            const totalPoints = gameScores.reduce(
              (sum, g) => sum + g.gamePercent + g.stagePercent,
              0
            );

            return {
              ...p,
              gameScores,
              totalPoints: Math.min(100, Math.round(totalPoints))
            };
          })
          .sort((a, b) => b.totalPoints - a.totalPoints);
      };

      if (!onboardingComplete) {
        return React.createElement('div', { className: "min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-orange-50 to-blue-50" },
          React.createElement('div', { className: "bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md border-2 border-orange-500" },
            React.createElement('div', { className: "text-center mb-8" },
              React.createElement('h2', { className: "text-3xl font-bold text-gray-800 mb-2" }, 'Welcome!'),
              React.createElement('p', { className: "text-gray-600" }, 'Seva Mela - VCD Department')
            ),
            
            React.createElement('div', { className: "space-y-6" },
              userCategory !== 'Admin' && React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-bold text-gray-700 mb-2" }, 'Your Name'),
                React.createElement('input', {
                  type: "text",
                  value: userName,
                  onChange: (e) => setUserName(e.target.value),
                  placeholder: "Enter your name",
                  className: "w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 transition-all"
                })
              ),

              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-bold text-gray-700 mb-2" }, 'Category'),
                React.createElement('select', {
                  value: userCategory,
                  onChange: (e) => {
                    setUserCategory(e.target.value);
                    setAdminPinInput('');
                  },
                  className: "w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 transition-all"
                },
                  React.createElement('option', { value: "" }, 'Select your category...'),
                  CATEGORIES.map(cat =>
                    React.createElement('option', { key: cat, value: cat }, cat)
                  )
                )
              ),

              userCategory === 'Admin' && React.createElement('div', { className: "bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4" },
                React.createElement('label', { className: "block text-sm font-bold text-yellow-800 mb-2" }, 'Admin PIN Required'),
                React.createElement('input', {
                  type: "password",
                  value: adminPinInput,
                  onChange: (e) => setAdminPinInput(e.target.value),
                  placeholder: "Enter admin PIN",
                  className: "w-full px-4 py-3 border-2 border-yellow-300 rounded-xl focus:outline-none focus:border-yellow-500"
                })
              ),

              React.createElement('button', {
                onClick: handleOnboardingSubmit,
                className: "w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-bold text-lg hover:scale-105 transition-all shadow-lg"
              }, 'Start Journey')
            )
          )
        );
      }

      const progress = calculateProgress();
      const leaderboard = getLeaderboard();
      const currentUserRank = leaderboard.findIndex(l => l.name === currentUser?.name && l.category === currentUser?.category) + 1;

      return React.createElement('div', { className: "min-h-screen bg-gray-50" },
        // Simple header
        React.createElement('div', { className: "bg-white border-b border-gray-200 p-4 sticky top-0 z-50 shadow-sm" },
          React.createElement('div', { className: "flex items-center justify-between max-w-7xl mx-auto" },
            React.createElement('div', { className: "flex items-center gap-3" },
              React.createElement('h1', { className: "text-xl font-bold text-gray-800" }, 'Seva Mela'),
              isAdmin && React.createElement('span', { 
                className: "text-xs bg-gray-100 px-3 py-1 rounded-full font-bold text-gray-700 border border-gray-300" 
              }, 'Admin')
            ),
            !isAdmin && React.createElement('div', { className: "flex items-center gap-2" },
              React.createElement('div', { className: "text-right" },
                React.createElement('div', { className: "text-xs text-gray-500" }, currentUser?.category),
                React.createElement('div', { className: "text-sm font-bold text-gray-800" }, currentUser?.name)
              )
            )
          ),
          
          // Progress bar
          !isAdmin && React.createElement('div', { className: "mt-4 max-w-7xl mx-auto" },
            React.createElement('div', { className: "flex items-center justify-between mb-2" },
              React.createElement('span', { className: "text-sm font-bold text-gray-700" }, 'Progress'),
              React.createElement('span', { className: "text-sm font-bold text-orange-600" }, `${progress}%`)
            ),
            React.createElement('div', { className: "progress-bar-container" },
              React.createElement('div', {
                className: "progress-fill",
                style: { width: `${progress}%` }
              })
            )
          )
        ),

        // Main Content
        React.createElement('div', { className: "p-4 max-w-7xl mx-auto pb-24" },
          activeView === 'scores' && isAdmin ? React.createElement('div', null,
            React.createElement('div', { className: "flex items-center justify-between mb-4" },
              React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, 'Player Scores'),
              React.createElement('button', {
                onClick: handleRefresh,
                className: "flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all"
              },
                React.createElement(Icon, { name: 'RotateCw', size: 16 }),
                'Refresh Scores'
              )
            ),
            React.createElement('div', { className: "bg-white rounded-2xl shadow-sm border border-gray-200 p-6" },
              getScoreTableData().length === 0 ? React.createElement('div', { className: "text-center text-gray-500 py-8" },
                React.createElement('p', null, 'No players yet')
              ) : React.createElement('div', { className: "score-table-container" },
                React.createElement('table', { className: "score-table" },
                  React.createElement('thead', null,
                    React.createElement('tr', null,
                      React.createElement('th', null, 'Player'),
                      React.createElement('th', null, 'Category'),
                      GAMES.map(game => 
                        React.createElement('th', { key: game.id, className: "text-center" }, game.name.substring(0, 6))
                      ),
                      React.createElement('th', { className: "text-center" }, 'Total')
                    )
                  ),
                  React.createElement('tbody', null,
                    getScoreTableData().map(player =>
                      React.createElement('tr', { key: `${player.name}-${player.category}` },
                        React.createElement('td', { className: "font-bold text-gray-800" }, player.name),
                        React.createElement('td', { className: "text-gray-600 text-sm" }, player.category),
                        player.gameScores.map(score =>
                          React.createElement('td', { key: score.gameId, className: "text-center text-xs" },
                            score.scanned 
                              ? React.createElement('div', { 
                                  className: score.gamePercent > 0 ? 'text-green-600 font-bold' : 'text-orange-600 font-bold'
                                },
                                  score.gamePercent > 0 && `G:${score.gamePercent}%`,
                                  score.gamePercent > 0 && React.createElement('br'),
                                  `S:${score.stagePercent}%`
                                )
                              : React.createElement('span', { className: 'text-gray-400' }, '-')
                          )
                        ),
                        React.createElement('td', { className: "text-center font-bold text-orange-600 text-lg" }, `${player.totalPoints}%`)
                      )
                    )
                  )
                )
              )
            )
          ) : React.createElement('div', null,
            // Stats section for users
            !isAdmin && React.createElement('div', { className: "mb-6 grid grid-cols-2 gap-3" },
              React.createElement('div', { className: "stat-badge" },
                React.createElement(Icon, { name: 'Target', size: 20, className: 'text-orange-600' }),
                React.createElement('div', null,
                  React.createElement('div', { className: "text-xs text-gray-500" }, 'Score'),
                  React.createElement('div', { className: "stat-value text-orange-600" }, `${progress}%`)
                )
              ),
              currentUserRank > 0 && React.createElement('div', { className: "stat-badge" },
                React.createElement(Icon, { name: 'Trophy', size: 20, className: 'text-blue-600' }),
                React.createElement('div', null,
                  React.createElement('div', { className: "text-xs text-gray-500" }, 'Rank'),
                  React.createElement('div', { className: "stat-value text-blue-600" }, `#${currentUserRank}`)
                )
              )
            ),

            isAdmin && React.createElement('div', { className: "flex items-center justify-between mb-4" },
              React.createElement('div', null),
              React.createElement('button', {
                onClick: handleRefresh,
                className: "flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all"
              },
                React.createElement(Icon, { name: 'RotateCw', size: 16 }),
                'Refresh Scores'
              )
            ),

            // Game cards
            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4" },
              GAMES.map(game => {
                const gameData = currentUser?.games?.[game.id];
                const currentStage = gameData?.scanned ? game.stageName : 'Not Started';
                const pendingPlayers = isAdmin ? participants.filter(p => 
                  !p.isAdmin && 
                  p.games[game.id]?.scanned && 
                  game.gamePoints > 0 && 
                  p.games[game.id]?.coinsEarned === 0
                ) : [];

                return React.createElement('div', {
                  key: game.id,
                  className: `game-card ${isAdmin ? 'cursor-pointer' : ''}`,
                  onClick: () => isAdmin && setSelectedGame(game)
                },
                  React.createElement('img', {
                    src: game.image,
                    alt: game.name,
                    className: 'game-card-image',
                    onError: (e) => {
                      e.target.style.display = 'none';
                    }
                  }),
                  
                  React.createElement('div', { className: "p-4" },
                    React.createElement('div', { className: "flex items-start justify-between mb-3" },
                      React.createElement('div', null,
                        React.createElement('h3', { className: "font-bold text-lg text-gray-800 mb-1" }, game.name),
                        React.createElement('p', { className: "text-sm text-gray-500" }, currentStage)
                      ),
                      gameData?.scanned && !isAdmin && React.createElement('div', { 
                        className: "flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold" 
                      },
                        React.createElement(Icon, { name: 'Check', size: 14 }),
                        'Done'
                      )
                    ),

                    !isAdmin ? React.createElement('div', { className: "space-y-2" },
                      game.gamePoints > 0 && React.createElement('div', { className: "flex items-center justify-between text-sm" },
                        React.createElement('span', { className: "text-gray-600" }, 'Game Points'),
                        React.createElement('span', { className: "font-bold text-blue-600" }, `${gameData?.gamePercent || 0}%`)
                      ),
                      React.createElement('div', { className: "flex items-center justify-between text-sm" },
                        React.createElement('span', { className: "text-gray-600" }, 'Stage Points'),
                        React.createElement('span', { className: "font-bold text-orange-600" }, `${gameData?.stagePercent || 0}%`)
                      )
                    ) : React.createElement('div', { className: "flex items-center justify-between" },
                      React.createElement('span', { className: "text-sm text-gray-600" }, 'Pending'),
                      React.createElement('span', { 
                        className: `font-bold text-lg ${pendingPlayers.length > 0 ? 'text-red-600' : 'text-gray-400'}` 
                      }, pendingPlayers.length)
                    )
                  )
                );
              })
            )
          )
        ),

        // Success Modal
        successModalData && React.createElement('div', { className: "modal-backdrop" },
          React.createElement('div', { className: "success-modal" },
            React.createElement('div', { className: "text-center" },
              React.createElement('div', { className: "success-checkmark" },
                React.createElement(Icon, { name: 'Check', size: 48, className: 'text-white', strokeWidth: 3 })
              ),
              React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-2" }, 'Success!'),
              React.createElement('p', { className: "text-lg text-gray-600 mb-4" },
                successModalData.game.name
              ),
              React.createElement('div', { className: "bg-orange-50 rounded-xl p-4 mb-4 border border-orange-200" },
                React.createElement('div', { className: "text-sm text-gray-600 mb-1" },
                  `Stage ${successModalData.scannedCount} of ${GAMES.length}`
                ),
                React.createElement('div', { className: "text-3xl font-bold text-orange-600" },
                  `${successModalData.totalProgress}%`
                )
              ),
              React.createElement('p', { className: "text-sm text-gray-500" },
                successModalData.scannedCount === GAMES.length 
                  ? 'All activities completed!' 
                  : 'Keep going!'
              )
            )
          )
        ),

        // QR Scanner Modal
        showQRScanner && React.createElement('div', { className: "modal-backdrop", onClick: stopQRScanner },
          React.createElement('div', {
            className: "fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md z-9999",
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('div', { className: "flex justify-between items-center mb-4" },
              React.createElement('h3', { className: "text-xl font-bold text-gray-800" }, 'Scan QR Code'),
              React.createElement('button', {
                onClick: stopQRScanner,
                className: "text-gray-400 hover:text-gray-600"
              },
                React.createElement(Icon, { name: 'X', size: 24 })
              )
            ),
            React.createElement('div', { id: "qr-reader", className: "mb-4 rounded-xl overflow-hidden" }),
            React.createElement('p', { className: "text-sm text-gray-600 text-center" }, 'Position the QR code within the frame')
          )
        ),

        // Leaderboard
        showLeaderboard && React.createElement('div', { className: "modal-backdrop", onClick: () => setShowLeaderboard(false) },
          React.createElement('div', {
            className: "leaderboard-slide p-6",
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('div', { className: "flex justify-between items-center mb-6" },
              React.createElement('h3', { className: "text-2xl font-bold text-gray-800 flex items-center gap-2" },
                React.createElement(Icon, { name: 'Trophy', size: 28, className: 'text-orange-600' }),
                'Leaderboard'
              ),
              React.createElement('button', {
                onClick: () => setShowLeaderboard(false),
                className: "text-gray-400 hover:text-gray-600"
              },
                React.createElement(Icon, { name: 'X', size: 24 })
              )
            ),

            !isAdmin && currentUserRank > 0 && React.createElement('div', { className: "bg-gradient-to-r from-orange-50 to-blue-50 border-2 border-orange-400 rounded-xl p-4 mb-6" },
              React.createElement('div', { className: "flex justify-between items-center" },
                React.createElement('div', null,
                  React.createElement('div', { className: "font-bold text-gray-800" }, `${currentUser.name}`),
                  React.createElement('div', { className: "text-sm text-gray-600" }, `${currentUser.category}`)
                ),
                React.createElement('div', { className: "text-right" },
                  React.createElement('div', { className: "text-3xl font-bold text-orange-600" }, `${progress}%`),
                  React.createElement('div', { className: "text-xs text-gray-600" }, `Rank #${currentUserRank}`)
                )
              )
            ),

            leaderboard.length === 0 ? React.createElement('div', { className: "text-center text-gray-500 py-12" },
              React.createElement('p', null, 'No participants yet')
            ) : React.createElement('div', { className: "space-y-3" },
              leaderboard.map((player) =>
                React.createElement('div', {
                  key: `${player.name}-${player.category}`,
                  className: `p-4 rounded-xl border-2 ${
                    player.rank <= 3 ? 'bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-400' : 'bg-white border-gray-200'
                  }`
                },
                  React.createElement('div', { className: "flex justify-between items-center" },
                    React.createElement('div', { className: "flex items-center gap-3" },
                      React.createElement('div', { className: "w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-700" },
                        `#${player.rank}`
                      ),
                      React.createElement('div', null,
                        React.createElement('div', { className: "font-bold text-gray-800" }, player.name),
                        React.createElement('div', { className: "text-xs text-gray-600" }, player.category)
                      )
                    ),
                    React.createElement('div', { className: "flex items-center gap-3" },
                      React.createElement('div', { className: "text-2xl font-bold text-orange-600" }, `${player.totalPercentage}%`),
                      isAdmin && React.createElement('button', {
                        onClick: (e) => {
                          e.stopPropagation();
                          deletePlayer(player.name, player.category);
                        },
                        className: "p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all"
                      },
                        React.createElement(Icon, { name: 'Trash2', size: 18 })
                      )
                    )
                  )
                )
              )
            )
          )
        ),

        // Admin Game Modal
        isAdmin && selectedGame && React.createElement('div', { className: "modal-backdrop", onClick: () => setSelectedGame(null) },
          React.createElement('div', {
            className: "fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg z-9999 max-h-[80vh] overflow-y-auto",
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('div', { className: "flex justify-between items-center mb-6" },
              React.createElement('h3', { className: "text-xl font-bold text-gray-800" }, selectedGame.name),
              React.createElement('button', {
                onClick: () => setSelectedGame(null),
                className: "text-gray-400 hover:text-gray-600"
              },
                React.createElement(Icon, { name: 'X', size: 24 })
              )
            ),

            React.createElement('h4', { className: "font-bold text-gray-700 mb-4" }, 'Pending Players'),

            React.createElement('div', { className: "space-y-4" },
              participants.filter(p => {
                if (!p || p.isAdmin) return false;
                if (!p.games || !p.games[selectedGame.id]) return false;
                if (!p.games[selectedGame.id].scanned) return false;
                if (selectedGame.gamePoints <= 0) return false;
                if (p.games[selectedGame.id].coinsEarned > 0) return false;
                return true;
              }).length === 0 ? React.createElement('div', { className: "text-center text-gray-500 py-8" },
                React.createElement('p', null, 'No pending players')
              ) : participants.filter(p => {
                if (!p || p.isAdmin) return false;
                if (!p.games || !p.games[selectedGame.id]) return false;
                if (!p.games[selectedGame.id].scanned) return false;
                if (selectedGame.gamePoints <= 0) return false;
                if (p.games[selectedGame.id].coinsEarned > 0) return false;
                return true;
              }).map(player => 
                React.createElement('div', {
                  key: `${player.name}-${player.category}`,
                  className: "bg-gray-50 border border-gray-200 rounded-xl p-4"
                },
                  React.createElement('div', { className: "font-bold text-gray-800 mb-3" },
                    `${player.name} (${player.category})`
                  ),
                  React.createElement('div', { className: "flex gap-2" },
                    React.createElement('input', {
                      type: "number",
                      id: `points-${player.name}-${player.category}`,
                      placeholder: `Coins (0-${selectedGame.maxCoins})`,
                      min: "0",
                      max: selectedGame.maxCoins.toString(),
                      className: "flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                    }),
                    React.createElement('button', {
                      onClick: () => {
                        const input = document.getElementById(`points-${player.name}-${player.category}`);
                        const coins = parseInt(input.value) || 0;
                        
                        if (confirm(`Award ${coins} coins to ${player.name}?`)) {
                          if (awardGamePoints(player.name, player.category, selectedGame.id, coins)) {
                            const gamePercent = selectedGame.maxCoins > 0 ? Math.round((coins / selectedGame.maxCoins) * selectedGame.gamePoints) : 0;
                            alert(`${coins} coins awarded = ${gamePercent}%!`);
                            input.value = '';
                          }
                        }
                      },
                      className: "px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-bold hover:scale-105 transition-all"
                    }, 'Award')
                  )
                )
              )
            )
          )
        ),

        // Bottom Navigation
        React.createElement('div', { className: "bottom-nav" },
          React.createElement('div', { className: "flex max-w-7xl mx-auto" },
            !isAdmin && React.createElement('button', {
              onClick: startQRScanner,
              className: "nav-button"
            },
              React.createElement(Icon, { name: 'ScanLine', size: 24 }),
              React.createElement('div', { className: "nav-label" }, 'Scan')
            ),
            React.createElement('button', {
              onClick: () => setShowLeaderboard(true),
              className: "nav-button"
            },
              React.createElement(Icon, { name: 'Trophy', size: 24 }),
              React.createElement('div', { className: "nav-label" }, 'Board')
            ),
            isAdmin && React.createElement('button', {
              onClick: () => setActiveView(activeView === 'scores' ? 'home' : 'scores'),
              className: `nav-button ${activeView === 'scores' ? 'active' : ''}`
            },
              React.createElement(Icon, { name: 'BarChart3', size: 24 }),
              React.createElement('div', { className: "nav-label" }, 'Scores')
            ),
            React.createElement('button', {
              onClick: () => {
                if (confirm('Logout?')) {
                  localStorage.removeItem('sevaMelaCurrentUser');
                  window.location.reload();
                }
              },
              className: "nav-button"
            },
              React.createElement(Icon, { name: 'LogOut', size: 24 }),
              React.createElement('div', { className: "nav-label" }, 'Logout')
            )
          )
        )
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(SevaMelaApp));
  </script>
</body>
</html>